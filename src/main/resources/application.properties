# ================== DATABASE CONFIG ==================
# Use Kubernetes Service names for discovery
spring.datasource.url=jdbc:mysql://mysql-svc:3306/pastelplanner
spring.datasource.username=pasteluser
# Password will be set from Kubernetes Secret via environment variable
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ================== REDIS CONFIG ==================
# Use Kubernetes Service name for Redis
spring.redis.host=redis-svc
spring.redis.port=6379
spring.redis.password=  # leave empty if no password
spring.redis.database=0
spring.redis.timeout=60000

# ================== JPA & HIKARI CONFIG ==================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
# Increase timeout for slow initial DB connections in K8s
spring.datasource.hikari.initialization-fail-timeout=60000
spring.datasource.hikari.connection-timeout=60000

# ================== SERVER CONFIG ==================
server.port=8080

# ================== PROFILE ==================
# Activate this profile in Kubernetes
spring.profiles.active=prod

# ================== OTHER CONFIGS ==================
spring.main.allow-bean-definition-overriding=true